var u=Object.defineProperty;var l=Object.getOwnPropertySymbols;var p=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable;var n=(t,e,r)=>e in t?u(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,d=(t,e)=>{for(var r in e||(e={}))p.call(e,r)&&n(t,r,e[r]);if(l)for(var r of l(e))y.call(e,r)&&n(t,r,e[r]);return t};var o=(t,e,r)=>(n(t,typeof e!="symbol"?e+"":e,r),r);import{_ as h,p as f}from"./vendor.4f1139c9.js";import{j as v,a as s,F as w}from"./main.bea20502.js";class j extends h{constructor(e){super(e);o(this,"state");o(this,"refRoot",f());o(this,"refVideo",f());this.state={trailer:!1};for(let r in e)this.state[r]=e[r]}async componentDidMount(){let e=Object(this.state);const r=e.url?decodeURIComponent(e.url).trim()+(decodeURIComponent(e.url).indexOf("?")+1?"&":"?")+"cache"+Math.random().toString().substr(2,3):"https://ahoy.yohoho.cc?cache"+Math.random().toString().substr(2,3),i=await fetch(r,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(e).toString()});let c;try{if(!i.ok)throw new Error("Invalid status");c=await i.json()}catch(m){console.error(m);return}let a=c.collaps;!a||!a.iframe||this.refVideo.current.setAttribute("src",decodeURIComponent(a.iframe))}render(){return v("div",{class:"player",ref:this.refRoot,children:[s("div",{class:"player-loading"}),s("iframe",{class:"player-video",ref:this.refVideo,frameBorder:"0",allowFullScreen:!0})]})}}class S extends h{constructor(e){super(e);o(this,"state");this.state={id:e.id}}render(){const e={kinopoisk:this.state.id};return s(w,{children:s(j,d({},e))})}}export{S as default};
